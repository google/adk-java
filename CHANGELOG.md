# Changelog

## [0.3.0](https://github.com/google/adk-java/compare/v0.2.0...v0.3.0) (2025-09-17)


### ‚ö† BREAKING CHANGES

* Allow `beforeModelCallback` to modify the LLM request
* Integrate Memory Service into ADK runtime
* This change requires users to update their configurations to provide a service account JSON file. This enables authentication with cloud services.

### Features

* Add BaseToolset and update McpToolset to use the new interface ([2aa474d](https://github.com/google/adk-java/commit/2aa474dc7106849029ab618a3e00304c25965235))
* Add BaseToolset and update McpToolset to use the new interface ([a211ac4](https://github.com/google/adk-java/commit/a211ac4cdf7914c86ccdd4b67f1c5d6426b22250))
* Add code executor ([5ffa984](https://github.com/google/adk-java/commit/5ffa9848afda1ba383dc602ed6d0419a5a55afbc))
* Add configurable CORS support via application.yml properties ([4d4fe25](https://github.com/google/adk-java/commit/4d4fe257730d4f97ef64758a7b751823aa108dbe))
* Add ContainerCodeExecutor ([a0a1616](https://github.com/google/adk-java/commit/a0a16167162641c6d4134c14aeb8b72acb119cd9))
* Add CORS configuration for local ADK-Web angular ([4d4fe25](https://github.com/google/adk-java/commit/4d4fe257730d4f97ef64758a7b751823aa108dbe))
* Add DeepWiki badge to README ([2a44d51](https://github.com/google/adk-java/commit/2a44d51901e634bfed1935fe94d42c8583363bc0))
* Add GeminiSchemaUtil for converting OpenAPI/MCP `JsonSchema` to `com.google.genai.types.Schema` ([1945fad](https://github.com/google/adk-java/commit/1945fad3e18311cbfd6bf27c80b7d344829a33fc))
* Add include_contents option to LlmAgentConfig to control inclusion of previous event contents in LLM requests ([2bfbc8f](https://github.com/google/adk-java/commit/2bfbc8fe03f521745528b7277688e3308adbc9b0))
* add instruction state injection bypass ([a3746ed](https://github.com/google/adk-java/commit/a3746ed46cf8a616c26f440678d854d0500135fb))
* Add MCP Toolset support for agent configuration ([bdc39f7](https://github.com/google/adk-java/commit/bdc39f738fda8e9f07f929a6b9b4a12a576e0413))
* Add sessionId() and events() to ReadOnlyContext ([a348a30](https://github.com/google/adk-java/commit/a348a30f0833f17a13d2eea2aa248dbbcbfbc561))
* Add support for configuring agent callbacks in YAML ([27c0172](https://github.com/google/adk-java/commit/27c01724d6e96da59379e54e3a9dcc138e494b47))
* Add support for configuring subagents in ADK agents via YAML ([d827eae](https://github.com/google/adk-java/commit/d827eaee3bc2313fac21568acf3f81f152ac9df7))
* Add support for programmatic sub-agent resolution using 'code' key ([c498d91](https://github.com/google/adk-java/commit/c498d911a6227bfec6df9516c75bc07b7d34fc99))
* add support for Streamable HTTP Connections to MCP Tools ([bea3244](https://github.com/google/adk-java/commit/bea3244c585012194b80754d476eee1b803dbecd))
* Add support for streaming tools ([fe1df53](https://github.com/google/adk-java/commit/fe1df539ca1f5d68dfed997405758b5ac5b1b388))
* Add usage metadata to LLM Response model ([f5b8fda](https://github.com/google/adk-java/commit/f5b8fda31279e60c52416a4a8539915248e8b781))
* Add VertexAiCodeExecutor ([e5b1fb3](https://github.com/google/adk-java/commit/e5b1fb39339410ffb01ad67b346a7fd60ebd8954))
* Added JSON Schema for configurable agents ([095eff6](https://github.com/google/adk-java/commit/095eff60e9c42f7dea13e1611f6aa8c14f28d1c8))
* Added serviceAccountJson as a parameter for toolset ([5ab8b14](https://github.com/google/adk-java/commit/5ab8b1409a7ffe5de8a44f73487f999bcb80d465))
* Adds `mvn google-adk:web ...` cli via maven plugin to allow users debug agents with Web UI much easier. ([b02c559](https://github.com/google/adk-java/commit/b02c5592fb4f75615908127729af7016a0362495))
* Adds support for YAML-based basic agents ([9723f8a](https://github.com/google/adk-java/commit/9723f8ac57d657d9a3d469dcb3416f13a1c84398))
* ADK Plugin Base Class ([dc29535](https://github.com/google/adk-java/commit/dc2953545a633db434f2d83d1f539ffd04bf4014))
* AgentStaticLoader; like an üßù Elve, instead of the üßô mage (fixes [#149](https://github.com/google/adk-java/issues/149)) ([5fcd413](https://github.com/google/adk-java/commit/5fcd4136aadb6e3592c643d766e3ea9d8917cb41))
* Allow LongRunningFunctionTool to be created with an instance ([9bd2bd6](https://github.com/google/adk-java/commit/9bd2bd68875da1e327dee9cc1cbbf23de4070b74))
* Allow max tokens to be customizable in Claude ([bbf38e3](https://github.com/google/adk-java/commit/bbf38e301c18b14ac459dcf151eb54c9239c51c9))
* bypass state injection for instructions constructed with an `InstructionProvider` ([ef2931a](https://github.com/google/adk-java/commit/ef2931a83f383cc85f5233ea08caebb35c67e0e5))
* **config:** Adds `ComponentRegistry` for loading objects in yaml config ([55fffb7](https://github.com/google/adk-java/commit/55fffb753464010f559cce17931d4db3244524db))
* **config:** Adds `resolveAgentClass`, `resolveToolInstance` and `resolveToolClass` to ComponentRegistry for resolving the 3 type of components ([8c107d2](https://github.com/google/adk-java/commit/8c107d23df3ce112f901fa9858b9839e856b6582))
* **config:** Supports loading yaml agents in `mvn google-adk@web ...` ([417a8bc](https://github.com/google/adk-java/commit/417a8bcf12bb2c21cf869554335f9649f9ff7a56))
* Enforce serializable types for FunctionTools ([bd0bb57](https://github.com/google/adk-java/commit/bd0bb576f0d63558bd63492ad543b7adac302525))
* Implement automatic tool discovery for config-based agents ([a2d9533](https://github.com/google/adk-java/commit/a2d95334cbdfe1c84464ae4777fbb592bfe02b7c))
* Implement tool configuration loading ([f27f48c](https://github.com/google/adk-java/commit/f27f48c273fb63c3080cd58554e14acf297196f8))
* Initial tutorials/city-time-weather ([6ce41ef](https://github.com/google/adk-java/commit/6ce41ef318e64212c226884323c425d46a98894e))
* Integrate Memory Service into ADK runtime ([f4f8309](https://github.com/google/adk-java/commit/f4f8309bb559e7139e3e2955b83b15e0ef4a5f67))
* Integrating Plugin with ADK ([c037893](https://github.com/google/adk-java/commit/c037893fe3554e37112ad22641b0a4578b06de0f))
* introduce an experimental parameter to limit number of steps LlmAgent can take ([4983747](https://github.com/google/adk-java/commit/498374717e9d6a3c635365ec2607a89aad8e0a17))
* Introduce ExampleTool for few-shot examples in LlmAgent ([2162f89](https://github.com/google/adk-java/commit/2162f8908232e42abcdf2d7a8fa848933619fc3e))
* Introduced ApplicationIntegrationToolset in JavaADK ([e21807c](https://github.com/google/adk-java/commit/e21807c57118c8466a29a876e70e7dcb79a085f2))
* Introduced ConnectionClient and IntegrationClient to get OPENAPISPEC of connection ([1e114cd](https://github.com/google/adk-java/commit/1e114cd22042fa3b3de252d45a7c291da641d443))
* JBang! üí• ü§Ø ([e10e4f9](https://github.com/google/adk-java/commit/e10e4f9be876064001356df49fa797559c54f944))
* Make `FunctionDeclaration.buildFunctionDeclaration` public ([5bf9cb0](https://github.com/google/adk-java/commit/5bf9cb0e90cefc6bea737fbb1c7f19db5738d3c8))
* make readonly context more efficient ([60a1707](https://github.com/google/adk-java/commit/60a1707d53c81f0876db3aa80d5b14941f885019))
* Make StreamableHttpServerParameters class non-final to allow subclassing ([bc3ae43](https://github.com/google/adk-java/commit/bc3ae4349b1734a532d46368567a9476468e28fa))
* **maven:** Supports using custom/subclass of ComponentRegistry to provide tools for agents ([7c7d779](https://github.com/google/adk-java/commit/7c7d77964729f8190ac212cdde06f88bd71ac646))
* pass headers while init mcp client ([744814a](https://github.com/google/adk-java/commit/744814a68fb92894d75a886e966a35f922f6150c))
* pass timeout config while init mcp client ([d255167](https://github.com/google/adk-java/commit/d255167db1a01aac79ab9a8eb9be130567bc8a91))
* provide more detailed logs when mcp tool declaration failed. ([4d5b63a](https://github.com/google/adk-java/commit/4d5b63ae184db6f72893e49eb47484ea4eefcc31))
* Refactors ADK agent loading with a new AgentLoader interface, add CompiledAgentLoader and AgentStaticLoader implementation, move YAML agent loader support to maven_plugin ([0f7904b](https://github.com/google/adk-java/commit/0f7904b903095cfe38822b70d608b4c6899b667a))
* **SseServerParameters:** Add configuration option for connection endpoint ([83899b9](https://github.com/google/adk-java/commit/83899b98e27bb1b5cf072ca09074e811982757c8))
* support AsyncMcpTool ([0c50970](https://github.com/google/adk-java/commit/0c509707fa9efd74e7d5e7a5ef2bf7ec31e1c712))
* support for mcp async toolset ([b867ea2](https://github.com/google/adk-java/commit/b867ea20854fcf57dc83442ac3ab29bc293683e5))
* update ConfigAgentLoader to load agents from the current directory ([008c196](https://github.com/google/adk-java/commit/008c196cd6abdbdbf605701536b92aabf925a3e1))
* Update FunctionTool to handle deserializing arbitrary return types ([a33f4da](https://github.com/google/adk-java/commit/a33f4da0ed73b5ab8ff05f18eb84a856e28ad2d1))
* Update model resolution logic for LLM agents ([4fc83f0](https://github.com/google/adk-java/commit/4fc83f079b630c4dac867989d36f0804f050902c))


### Bug Fixes

* `remove` is a state mutation operation and should also be captured in the delta ([1071f1e](https://github.com/google/adk-java/commit/1071f1e12b916e90efb22a07318a9d356b897a7c))
* Add missing logging for MCP Servers ([e2c4d40](https://github.com/google/adk-java/commit/e2c4d40faf1f8cb20015c82816607bca4f9d63bb))
* Added `httpclient5` dependency to `pom.xml` to fix ADKWebServer instantiating issue ([62eb2ec](https://github.com/google/adk-java/commit/62eb2ec90945b181871174f9b342a2883689bc4c))
* Allow `beforeModelCallback` to modify the LLM request ([8e10df2](https://github.com/google/adk-java/commit/8e10df2a543a6ffc1eb91c9ff135ade19bcd975c))
* Broken Dev UI (fixes [#302](https://github.com/google/adk-java/issues/302)) ([852ebd8](https://github.com/google/adk-java/commit/852ebd88c0720dddf1e7397ef21db3a095bdc101))
* change scheme to https ([7bc003e](https://github.com/google/adk-java/commit/7bc003e50133aeb18c24e3e60dcccd2762049938))
* Check input validity before appending to example ([97f02ab](https://github.com/google/adk-java/commit/97f02ab46c538b680387df7f5c7b1dfcc978b0e6))
* Ensure function call ID is populated before building list of long running function calls ([d204294](https://github.com/google/adk-java/commit/d2042949dc22115294f2fd21433c8b1387044b9b))
* Exclude image labels when sending requests to Gemini API ([7d10299](https://github.com/google/adk-java/commit/7d1029931c89863619f894e48929c521de3dc047))
* exclude Thought from being printed as context ([40af9bb](https://github.com/google/adk-java/commit/40af9bb32a058099292075f352d5229dc010d2c6))
* expose LlmAgent's max steps parameter via a getter ([0431e2b](https://github.com/google/adk-java/commit/0431e2b692adf6e970ea24cf9b7819ed15560dbe))
* Fix Claude LLM when no tools are provided (fixes [#382](https://github.com/google/adk-java/issues/382)) ([99265cf](https://github.com/google/adk-java/commit/99265cf268be4dbd0a82decf5c48bf57b3725b53))
* Fix InMemorySessionService timestamp seconds conversion ([21c09ac](https://github.com/google/adk-java/commit/21c09ac1ca50829ed765292c093853b89df20944))
* Fix the incorrect timestamp in `Event` ([e1214c1](https://github.com/google/adk-java/commit/e1214c136ee40a2843a095a7a7be5acaf7506134))
* Fix view eval case ([315f354](https://github.com/google/adk-java/commit/315f354ea5880b8b2dbc39fde92d7eb33438e35b))
* Fixed AgentStaticLoader bean registration using ApplicationContextInitializer and resolved OpenTelemetry double initialization in tests ([87acdf8](https://github.com/google/adk-java/commit/87acdf8083e7c4dc92273dcde0048ee9be2882fd))
* Flip equals() in LangChain4j for better null safety ([d5c98ad](https://github.com/google/adk-java/commit/d5c98ad1f9a0b6a07fde895bfa7b8f9c0e8e7106))
* formatting error in LangChain4J test ([c4e363a](https://github.com/google/adk-java/commit/c4e363a8b3c29d039fbf4718c20936f95b609fb5))
* handle state removals when applying stateDelta in BaseSessionService.appendEvent ([34151c7](https://github.com/google/adk-java/commit/34151c7977e9d997f73e92d3d7d0e413034758db))
* IncludeContents.None not including user message in request ([c0302b6](https://github.com/google/adk-java/commit/c0302b67716b58213d41fee9ee83876d66483618))
* Increase default MCP client timeouts to 5 minutes ([d46673e](https://github.com/google/adk-java/commit/d46673e23960360491b69d20fff2e399b0606d09))
* Increase max output tokens for Claude to 8k ([90b7bf4](https://github.com/google/adk-java/commit/90b7bf47b7bdb80962c64a983779a3a2b1008878))
* JavaDoc mistake in ParallelAgent ([ff3c803](https://github.com/google/adk-java/commit/ff3c80326be5ea10e4785ff0fc47f087f2cdb193))
* live agents using Gemini don't call tools ([cca154d](https://github.com/google/adk-java/commit/cca154df3dfdf4da35137d4b356ae474139e66c3))
* Make BaseMemoryService nullable in Runner ([2955789](https://github.com/google/adk-java/commit/2955789350a65ac081cdfbb4697c7fdd926d32e8))
* Make sessionService() in InvocationContext public instead of protected ([1ae5639](https://github.com/google/adk-java/commit/1ae5639e5c64f38a2e94018dd6421b2569aeb0bb))
* missing "model" role in Gemini LLM responses ([13dd978](https://github.com/google/adk-java/commit/13dd9789626249225115af01f149959d9e9880c2))
* multiple tool requests with langchain4j ([92631a1](https://github.com/google/adk-java/commit/92631a1cb73cf4e04dfe7ca66288acf66d0d00fa))
* operation should be added irrespective of actions or entities ([55b87ee](https://github.com/google/adk-java/commit/55b87ee4b3f243132308a43abde17b8dba30ff4d))
* Refactor web server components and agent loaders from maven_plugin to dev module ([9e3723b](https://github.com/google/adk-java/commit/9e3723ba51ea820d643398bfecfb17e822f47aeb))
* Remove copy/pasta üçù in Mcp[Aync]Tool ([d972b87](https://github.com/google/adk-java/commit/d972b87609c1aab5a95b8d75e8a30ba73bdc9869))
* remove debug logs from base llm flow to prevent accidentally logging user data ([cb95b56](https://github.com/google/adk-java/commit/cb95b56b280c51dc67716fc17e0ded92d0d2c4f5))
* Remove GeminiSchemaUtil and use JsonSchema directly in FunctionDeclaration ([1a93675](https://github.com/google/adk-java/commit/1a93675e1ea4ce8f637498344a77326a83b1ff35))
* Remove network package since it is not used ([a3c47bc](https://github.com/google/adk-java/commit/a3c47bcf40fba8e5413b86d2bc026c00ef5550f7))
* Remove residual web components from maven_plugin ([855da19](https://github.com/google/adk-java/commit/855da19f53c03ba8f458603f6114d015463b170a))
* Removed `FeatureDecorator` class ([a678cca](https://github.com/google/adk-java/commit/a678ccaa894d9db0f069d8f59c9a46bc1113c88c))
* reverting incorrect fix handling appendEvent singles ([5a7ab20](https://github.com/google/adk-java/commit/5a7ab202ae26047796d8ff8a5d6bffcebbb6e180))
* runAsync handles the async response of sessionService.appendEvent ([eb232ee](https://github.com/google/adk-java/commit/eb232ee780c986bfdbae708882c7766854bba5d5))
* Runner now includes Singles from appendEvent in the Rx graph ([b862ad4](https://github.com/google/adk-java/commit/b862ad45212bcb90696df3a4e35902c0e0abc20e))
* Same GenAI version in langchain4j as in core ([6ef972d](https://github.com/google/adk-java/commit/6ef972d9801209542b71f905526be1db78afa73e))
* StreamingToolTest flakiness ([bfdf13c](https://github.com/google/adk-java/commit/bfdf13c147f02022ae45285c25222c4eca790c5e))
* Support parameterized List parameters for Function tools ([89fb519](https://github.com/google/adk-java/commit/89fb519f1567d519367ee41bb993d4c293cb10c7))
* **tool:** Fixes ExitLoopTool by adding `Schema` and description ([0099e5f](https://github.com/google/adk-java/commit/0099e5fe45ad340c53b785442eb85b65ce7cedda))
* Tracking headers not being added to default model use ([2ab2065](https://github.com/google/adk-java/commit/2ab20653c8edf6073bbe6f1e8cb432867cc589f7))
* use a sentinel object instead of null to indicate removal of keys from state ([f1c0602](https://github.com/google/adk-java/commit/f1c060215d7660253068cf7065be39f514f91598))


### Documentation

* Adjust heading levels in WebMojo Javadoc ([62ed9d8](https://github.com/google/adk-java/commit/62ed9d85e35b29fd67e94f1192f3e6e077ad5c11))
* Clarify Code Format and Single Commit on ADK Java CONTRIBUTING ([d094cc2](https://github.com/google/adk-java/commit/d094cc2abf604f38a7fc27e9206d7f965bf2cd59))
* remove stale TODO. #non-breaking ([5117b8d](https://github.com/google/adk-java/commit/5117b8d6c3120e7832996892ce08d710a87c8789))
